(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{9208:function(e,t,s){Promise.resolve().then(s.bind(s,1059))},6463:function(e,t,s){"use strict";var l=s(1169);s.o(l,"usePathname")&&s.d(t,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},1059:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var l=s(7437),n=s(2265),a=s(6463),r=s(4032),i=s(7256),c=s(1433),o=s(9354);function d(){var e;let t=(0,a.useRouter)(),{serviceType:s,routeType:d,pickup:u,deliveries:x,items:m,schedule:h}=(0,i.v4)();(0,n.useEffect)(()=>{if(!s){t.replace("/booking/steps/delivery-type");return}if(!d){t.replace("/booking/steps/route-type");return}if(!u){t.replace("/booking/steps/pickup");return}if(!x||0===x.length){t.replace("/booking/steps/deliveries");return}if(!m||0===m.length){t.replace("/booking/steps/items");return}if(!h){t.replace("/booking/steps/schedule");return}},[s,d,u,x,m,h,t]);let p=(0,n.useMemo)(()=>(function(){let e=new Date,t=e.getFullYear().toString().slice(-2),s=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return"STL-".concat(t).concat(s).concat(l,"-").concat(Math.floor(9e3*Math.random())+1e3)})(),[]),b=(0,n.useMemo)(()=>m?m.reduce((e,t)=>{let s=t.volumetricWeightKg||0,l=t.weightKg||0;return e+(s>l?s:l)*(t.quantity||1)},0):0,[m]),f=(0,n.useMemo)(()=>{var e;return s?(0,c.w)({distanceKm:12,totalBillableWeightKg:b,stops:null!==(e=null==x?void 0:x.length)&&void 0!==e?e:0,serviceType:s}):0},[s,b,null==x?void 0:x.length]),g="same-day"===s?"Same Day Delivery":"next-day"===s?"Next Day Delivery":"express-3h"===s?"3-Hour Express":"-";return(0,l.jsx)(r.N,{title:"Booking Created",subtitle:"Your courier request has been submitted to the operations team.",currentStep:8,totalSteps:8,backHref:"/booking/steps/summary",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3",children:[(0,l.jsx)("div",{className:"mt-0.5 h-6 w-6 shrink-0 rounded-full bg-emerald-500 text-center text-sm font-semibold text-white",children:"✓"}),(0,l.jsxs)("div",{className:"text-sm text-emerald-900",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Booking submitted successfully."}),(0,l.jsx)("p",{className:"mt-0.5 text-[11px] text-emerald-900/80",children:"Our team will check delivery capacity and confirm the slot. You'll be contacted if any rescheduling is required."})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Job ID"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:p}),(0,l.jsx)("p",{className:"mt-1 text-[11px] text-slate-500",children:"Use this ID when you contact support or check the job status."})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Service & Schedule"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:g}),h&&(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Pickup on ",(0,l.jsx)("span",{className:"font-medium",children:h.pickupDate})," \xb7"," ","Slot: ",(0,l.jsx)("span",{className:"font-medium",children:h.pickupSlot})]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Summary"}),(0,l.jsxs)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[null!==(e=null==x?void 0:x.length)&&void 0!==e?e:0," delivery point",x&&x.length>1?"s":""]}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Est. charges:"," ",(0,l.jsx)("span",{className:"font-semibold",children:(0,o.x)(f)}),(0,l.jsx)("br",{}),"Billable weight: ",b.toFixed(2)," kg"]})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-[1.3fr_1.7fr]",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pickup Location"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==u?void 0:u.companyName)||(null==u?void 0:u.contactName)||"Pickup Location"}),(0,l.jsxs)("p",{className:"mt-1 text-xs text-slate-700",children:[null==u?void 0:u.addressLine1,(null==u?void 0:u.addressLine2)?", ".concat(u.addressLine2):""]}),(0,l.jsx)("p",{className:"text-xs text-slate-700",children:null==u?void 0:u.postalCode}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Contact: ",null==u?void 0:u.contactName," \xb7 ",null==u?void 0:u.contactPhone]}),(null==u?void 0:u.remarks)&&(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Remarks: ",u.remarks]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4 space-y-2",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Delivery Overview"}),null==x?void 0:x.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50/70 px-3 py-2 text-[11px]",children:[(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.addressLine1,e.addressLine2?", ".concat(e.addressLine2):""," (",e.postalCode,")"]}),(0,l.jsxs)("p",{className:"text-slate-600",children:["Recipient: ",e.contactName," \xb7 ",e.contactPhone]}),e.remarks&&(0,l.jsxs)("p",{className:"mt-0.5 text-slate-500",children:["Delivery remarks: ",e.remarks]})]},e.id)),x&&x.length>3&&(0,l.jsxs)("p",{className:"text-[11px] text-slate-500",children:["+ ",x.length-3," more delivery point",x.length-3>1?"s":""," in this job."]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-3 border-t border-slate-200 pt-4 md:flex-row md:items-center md:justify-between",children:[(0,l.jsx)("div",{className:"text-[11px] text-slate-500",children:"STL team will assign a driver and update you on any changes to the schedule. You can track the status of this job using the Job ID above."}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{t.push("/tracking/".concat(p))},className:"inline-flex items-center rounded-lg border border-sky-600 px-4 py-2 text-xs font-medium text-sky-700 hover:bg-sky-50",children:"Track this job →"}),(0,l.jsx)("button",{type:"button",onClick:()=>{t.push("/booking/steps/delivery-type")},className:"inline-flex items-center rounded-lg bg-slate-900 px-4 py-2 text-xs font-medium text-white hover:bg-slate-800",children:"+ Book another job"})]})]})]})})}},4032:function(e,t,s){"use strict";s.d(t,{N:function(){return a}});var l=s(7437),n=s(7138);function a(e){let{title:t,subtitle:s,children:a,currentStep:r,totalSteps:i,backHref:c}=e;return(0,l.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,l.jsxs)("div",{className:"w-full max-w-3xl px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Booking Wizard"}),(0,l.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:t}),s&&(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:s})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Step ",r," of ",i]}),(0,l.jsx)("div",{className:"mt-1 h-1 w-32 rounded-full bg-slate-200",children:(0,l.jsx)("div",{className:"h-1 rounded-full bg-sky-500",style:{width:"".concat(r/i*100,"%")}})})]})]}),c&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(n.default,{href:c,className:"inline-flex items-center text-xs text-slate-500 hover:text-slate-700",children:"← Back"})}),(0,l.jsx)("section",{className:"rounded-2xl bg-white shadow-sm border border-slate-200 p-4 sm:p-6",children:a})]})})}},7256:function(e,t,s){"use strict";s.d(t,{EI:function(){return o},IU:function(){return i},v4:function(){return c}});var l=s(7437),n=s(2265);let a=(0,n.createContext)(void 0),r={companyName:"",contactName:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",postalCode:"",remarks:"",saveAsFavorite:!0};function i(e){let{children:t}=e,[s,r]=(0,n.useState)(null),[i,c]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[u,x]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[p,b]=(0,n.useState)(null);return(0,l.jsx)(a.Provider,{value:{serviceType:s,routeType:i,pickup:o,deliveries:u,items:m,schedule:p,setServiceType:r,setRouteType:c,setPickup:e=>{d({...e})},setDeliveries:e=>{x(e.map(e=>({...e})))},setItems:e=>{h(e.map(e=>({...e})))},setSchedule:e=>{b({...e})},resetBooking:()=>{r(null),c(null),d(null),x([]),h([]),b(null)}},children:t})}function c(){let e=(0,n.useContext)(a);if(!e)throw Error("useBooking must be used within a BookingProvider");return e}function o(){return{...r}}},1433:function(e,t,s){"use strict";function l(e){let t=5+.5*e.distanceKm+.8*e.totalBillableWeightKg+(e.stops-1)*1.5;return"express-3h"===e.serviceType&&(t*=1.5),Math.round(100*t)/100}s.d(t,{w:function(){return l}})},9354:function(e,t,s){"use strict";function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SGD";return new Intl.NumberFormat("en-SG",{style:"currency",currency:t}).format(e)}s.d(t,{x:function(){return l}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=9208)}),_N_E=e.O()}]);