(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{26:function(e,t,s){Promise.resolve().then(s.bind(s,4256))},6463:function(e,t,s){"use strict";var l=s(1169);s.o(l,"usePathname")&&s.d(t,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},4256:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var l=s(7437),n=s(2265),r=s(6463),a=s(4032),i=s(7256),c=s(1433),d=s(9354);function o(){let e=(0,r.useRouter)(),{serviceType:t,routeType:s,pickup:o,deliveries:x,items:u,schedule:m}=(0,i.v4)();(0,n.useEffect)(()=>{if(!t){e.replace("/booking/steps/delivery-type");return}if(!s){e.replace("/booking/steps/route-type");return}if(!o){e.replace("/booking/steps/pickup");return}if(!x||0===x.length){e.replace("/booking/steps/deliveries");return}if(!u||0===u.length){e.replace("/booking/steps/items");return}if(!m){e.replace("/booking/steps/schedule");return}},[t,s,o,x,u,m,e]);let p=(0,n.useMemo)(()=>u.reduce((e,t)=>{let s=t.volumetricWeightKg||0,l=t.weightKg||0;return e+(s>l?s:l)*(t.quantity||1)},0),[u]),h=(0,n.useMemo)(()=>t?(0,c.w)({distanceKm:12,totalBillableWeightKg:p,stops:x.length,serviceType:t}):0,[t,p,x.length]),f="same-day"===t?"Same Day Delivery":"next-day"===t?"Next Day Delivery":"express-3h"===t?"3-Hour Express":"-";return(0,l.jsx)(a.N,{title:"Review & Confirm",subtitle:"Check all details before creating the booking.",currentStep:7,totalSteps:8,backHref:"/booking/steps/schedule",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Service"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:f}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Route: ","one-to-many"===s?"One pickup → Many deliveries":"many-to-one"===s?"Many pickups → One delivery":"one-to-one"===s?"One pickup → One delivery":"round-trip"===s?"Round trip / sequence":"-"]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Stops & Weight"}),(0,l.jsxs)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[x.length," delivery point",x.length>1?"s":""]}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Total billable weight: ",p.toFixed(2)," kg"]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Estimated Charges"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(0,d.x)(h)}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Based on mock distance of ",12," km for prototyping."]})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1.8fr]",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pickup"}),(0,l.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==o?void 0:o.companyName)||(null==o?void 0:o.contactName)||"Pickup Location"}),(0,l.jsxs)("p",{className:"mt-1 text-xs text-slate-700",children:[null==o?void 0:o.addressLine1,(null==o?void 0:o.addressLine2)?", ".concat(o.addressLine2):""]}),(0,l.jsx)("p",{className:"text-xs text-slate-700",children:null==o?void 0:o.postalCode}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Contact: ",null==o?void 0:o.contactName," \xb7 ",null==o?void 0:o.contactPhone]}),m&&(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Pickup on ",m.pickupDate," \xb7 Slot:"," ",m.pickupSlot]}),(null==o?void 0:o.remarks)&&(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-500",children:["Remarks: ",o.remarks]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notes"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-600",children:"In a real system, this section can also highlight requested delivery windows, restricted zones, surcharges, and SLA warnings (e.g. cut-off times)."})]})]}),(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsxs)("div",{className:"space-y-3 rounded-xl border border-slate-200 bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Deliveries & Items"}),x.map(e=>{let t=u.filter(t=>t.deliveryId===e.id);return(0,l.jsxs)("div",{className:"space-y-1.5 rounded-lg border border-slate-200 bg-slate-50/60 px-3 py-2",children:[(0,l.jsxs)("p",{className:"text-xs font-semibold text-slate-900",children:[e.addressLine1,e.addressLine2?", ".concat(e.addressLine2):""," (",e.postalCode,")"]}),(0,l.jsxs)("p",{className:"text-[11px] text-slate-600",children:["Recipient: ",e.contactName," \xb7 ",e.contactPhone]}),e.remarks&&(0,l.jsxs)("p",{className:"text-[11px] text-slate-500",children:["Delivery remarks: ",e.remarks]}),0===t.length?(0,l.jsx)("p",{className:"text-[11px] text-red-500",children:"No items recorded for this delivery (check Items step)."}):(0,l.jsx)("ul",{className:"mt-1 space-y-1",children:t.map(e=>{let t=e.volumetricWeightKg||0,s=e.weightKg||0,n=t>s?t:s,r=e.quantity||1,a=n*r;return(0,l.jsxs)("li",{className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[11px]",children:[(0,l.jsx)("span",{className:"font-medium text-slate-800",children:e.description||"(No description)"}),(0,l.jsxs)("span",{className:"ml-1 text-slate-500",children:["\xb7 ",e.category," \xb7 Qty ",r]}),(0,l.jsxs)("div",{className:"mt-0.5 text-slate-600",children:["Actual ",s||0," kg \xb7 Vol ",t||0," kg \xb7 Billable ",a.toFixed(2)," kg"]}),e.remarks&&(0,l.jsxs)("div",{className:"mt-0.5 text-slate-500",children:["Remarks: ",e.remarks]})]},e.id)})})]},e.id)})]})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{e.push("/booking/steps/schedule")},className:"text-xs text-slate-600 hover:text-slate-800",children:"← Back to Schedule"}),(0,l.jsx)("button",{type:"button",onClick:()=>{e.push("/booking/steps/confirmation")},className:"inline-flex items-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",children:"Confirm & Create Booking →"})]})]})})}},4032:function(e,t,s){"use strict";s.d(t,{N:function(){return r}});var l=s(7437),n=s(7138);function r(e){let{title:t,subtitle:s,children:r,currentStep:a,totalSteps:i,backHref:c}=e;return(0,l.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,l.jsxs)("div",{className:"w-full max-w-3xl px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Booking Wizard"}),(0,l.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:t}),s&&(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:s})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Step ",a," of ",i]}),(0,l.jsx)("div",{className:"mt-1 h-1 w-32 rounded-full bg-slate-200",children:(0,l.jsx)("div",{className:"h-1 rounded-full bg-sky-500",style:{width:"".concat(a/i*100,"%")}})})]})]}),c&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(n.default,{href:c,className:"inline-flex items-center text-xs text-slate-500 hover:text-slate-700",children:"← Back"})}),(0,l.jsx)("section",{className:"rounded-2xl bg-white shadow-sm border border-slate-200 p-4 sm:p-6",children:r})]})})}},7256:function(e,t,s){"use strict";s.d(t,{EI:function(){return d},IU:function(){return i},v4:function(){return c}});var l=s(7437),n=s(2265);let r=(0,n.createContext)(void 0),a={companyName:"",contactName:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",postalCode:"",remarks:"",saveAsFavorite:!0};function i(e){let{children:t}=e,[s,a]=(0,n.useState)(null),[i,c]=(0,n.useState)(null),[d,o]=(0,n.useState)(null),[x,u]=(0,n.useState)([]),[m,p]=(0,n.useState)([]),[h,f]=(0,n.useState)(null);return(0,l.jsx)(r.Provider,{value:{serviceType:s,routeType:i,pickup:d,deliveries:x,items:m,schedule:h,setServiceType:a,setRouteType:c,setPickup:e=>{o({...e})},setDeliveries:e=>{u(e.map(e=>({...e})))},setItems:e=>{p(e.map(e=>({...e})))},setSchedule:e=>{f({...e})},resetBooking:()=>{a(null),c(null),o(null),u([]),p([]),f(null)}},children:t})}function c(){let e=(0,n.useContext)(r);if(!e)throw Error("useBooking must be used within a BookingProvider");return e}function d(){return{...a}}},1433:function(e,t,s){"use strict";function l(e){let t=5+.5*e.distanceKm+.8*e.totalBillableWeightKg+(e.stops-1)*1.5;return"express-3h"===e.serviceType&&(t*=1.5),Math.round(100*t)/100}s.d(t,{w:function(){return l}})},9354:function(e,t,s){"use strict";function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SGD";return new Intl.NumberFormat("en-SG",{style:"currency",currency:t}).format(e)}s.d(t,{x:function(){return l}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=26)}),_N_E=e.O()}]);