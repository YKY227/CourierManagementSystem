(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{68:function(e,s,t){Promise.resolve().then(t.bind(t,6932))},6932:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),l=t(2265),r=t(381);let i=["central","east","west","north","north-east","island-wide"],n=["bike","car","van","lorry","other"];function d(){var e,s;let[t,d]=(0,l.useState)(r.u6),[o,c]=(0,l.useState)(null),[x,m]=(0,l.useState)(null),p=e=>{c("edit"),m({...e})},h=()=>{c(null),m(null)},u=e=>{if(!x)return;let{name:s,value:t,type:a,checked:l}=e.target;m(e=>e?"isActive"===s&&"checkbox"===a?{...e,isActive:l}:"maxJobsPerDay"===s||"maxJobsPerSlot"===s||"workDayStartHour"===s||"workDayEndHour"===s?{...e,[s]:Number(t)||0}:{...e,[s]:t}:e)},y=e=>{x&&m(s=>{var t;if(!s)return s;let a=null!==(t=s.secondaryRegions)&&void 0!==t?t:[],l=a.includes(e);return{...s,secondaryRegions:l?a.filter(s=>s!==e):[...a,e]}})},b=e=>{d(s=>s.map(s=>s.id===e?{...s,isActive:!s.isActive}:s))};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-8",children:[(0,a.jsxs)("header",{className:"mb-6 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Drivers"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Manage driver profiles, service regions, and capacity. These records will be used by the assignment engine and Driver PWA."})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{c("create"),m({id:void 0,code:"",name:"",email:"",phone:"",primaryRegion:"central",secondaryRegions:[],vehicleType:"bike",isActive:!0,maxJobsPerDay:20,maxJobsPerSlot:6,workDayStartHour:8,workDayEndHour:18,notes:"",authUserId:void 0})},className:"inline-flex items-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-sky-700",children:"+ Add driver"})]}),(0,a.jsxs)("section",{className:"mb-6 grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Total drivers"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-slate-900",children:t.length})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Active & assignable"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-emerald-700",children:t.filter(e=>e.isActive).length})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Main regions covered"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-800",children:Array.from(new Set(t.map(e=>e.primaryRegion))).map(e=>r.xw[e]).join(", ")})]})]}),(0,a.jsx)("section",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Driver"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Regions"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Vehicle"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Capacity"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-slate-100",children:[t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50/60",children:[(0,a.jsxs)("td",{className:"px-4 py-3 align-top",children:[(0,a.jsx)("div",{className:"font-medium text-slate-900",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-slate-600",children:e.email}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:e.phone}),e.code&&(0,a.jsx)("div",{className:"mt-0.5 inline-flex rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-medium text-slate-600",children:e.code})]}),(0,a.jsxs)("td",{className:"px-4 py-3 align-top text-xs text-slate-700",children:[(0,a.jsx)("div",{className:"font-medium",children:r.xw[e.primaryRegion]}),e.secondaryRegions&&e.secondaryRegions.length>0&&(0,a.jsxs)("div",{className:"mt-0.5 text-slate-500",children:["Also:"," ",e.secondaryRegions.map(e=>r.xw[e]).join(", ")]})]}),(0,a.jsx)("td",{className:"px-4 py-3 align-top text-xs text-slate-700",children:r.wQ[e.vehicleType]}),(0,a.jsxs)("td",{className:"px-4 py-3 align-top text-xs text-slate-700",children:[(0,a.jsxs)("div",{children:["Max/day:"," ",(0,a.jsx)("span",{className:"font-medium",children:e.maxJobsPerDay})]}),(0,a.jsxs)("div",{children:["Max/slot:"," ",(0,a.jsx)("span",{className:"font-medium",children:e.maxJobsPerSlot})]}),(0,a.jsxs)("div",{className:"text-slate-500",children:["Hours: ",e.workDayStartHour,":00 – ",e.workDayEndHour,":00"]})]}),(0,a.jsx)("td",{className:"px-4 py-3 align-top",children:(0,a.jsx)("span",{className:["inline-flex rounded-full px-2 py-0.5 text-[11px] font-medium",e.isActive?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-slate-100 text-slate-500 border border-slate-200"].join(" "),children:e.isActive?"Active":"Inactive"})}),(0,a.jsxs)("td",{className:"px-4 py-3 align-top text-right text-xs",children:[(0,a.jsx)("button",{type:"button",onClick:()=>p(e),className:"mr-2 text-sky-600 hover:text-sky-700",children:"Edit"}),(0,a.jsx)("button",{type:"button",onClick:()=>b(e.id),className:"text-slate-500 hover:text-slate-700",children:e.isActive?"Deactivate":"Activate"})]})]},e.id)),0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-6 text-center text-xs text-slate-500",children:'No drivers yet. Click "Add driver" to create your first one.'})})]})]})})]}),o&&x&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 flex justify-end bg-black/40",children:(0,a.jsxs)("div",{className:"flex h-full w-full max-w-md flex-col bg-white shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:"create"===o?"Add driver":"Edit driver"}),(0,a.jsx)("p",{className:"text-[11px] text-slate-500",children:"Driver settings here will directly affect auto-assignment and capacity calculation."})]}),(0,a.jsx)("button",{type:"button",onClick:h,className:"text-xs text-slate-500 hover:text-slate-800",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!x)return;if(!x.name||!x.email||!x.phone){alert("Name, email, and phone are required.");return}if(!x.primaryRegion){alert("Please select a primary region.");return}let s=Date.now();if("create"===o){let e={...x,id:"drv-".concat(s),code:x.code||"DRV-".concat(t.length+1).padStart(7,"0")};d(s=>[...s,e])}else"edit"===o&&x.id&&d(e=>e.map(e=>e.id===x.id?x:e));h()},className:"flex-1 space-y-4 overflow-y-auto px-4 py-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-slate-700",children:["Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{name:"name",value:x.name,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"e.g. Alex Tan"})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-slate-700",children:["Email ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{name:"email",type:"email",value:x.email,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"name@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-slate-700",children:["Phone ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{name:"phone",value:x.phone,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"+65 ..."})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Internal driver code"}),(0,a.jsx)("input",{name:"code",value:null!==(e=x.code)&&void 0!==e?e:"",onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"e.g. DRV-001"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500",children:"Optional – used for internal reference on the ops side."})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-slate-700",children:["Primary region ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("select",{name:"primaryRegion",value:x.primaryRegion,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",children:i.map(e=>(0,a.jsx)("option",{value:e,children:r.xw[e]},e))})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Secondary regions"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:i.map(e=>{var s;return(0,a.jsx)("button",{type:"button",onClick:()=>y(e),className:["rounded-full border px-2 py-0.5 text-[11px]",(null===(s=x.secondaryRegions)||void 0===s?void 0:s.includes(e))?"border-sky-500 bg-sky-50 text-sky-700":"border-slate-200 bg-slate-50 text-slate-600"].join(" "),children:r.xw[e]},e)})})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Vehicle type"}),(0,a.jsx)("select",{name:"vehicleType",value:x.vehicleType,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",children:n.map(e=>(0,a.jsx)("option",{value:e,children:r.wQ[e]},e))})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Max jobs per day"}),(0,a.jsx)("input",{name:"maxJobsPerDay",type:"number",min:1,value:x.maxJobsPerDay,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Max jobs per time slot"}),(0,a.jsx)("input",{name:"maxJobsPerSlot",type:"number",min:1,value:x.maxJobsPerSlot,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Workday start (hour)"}),(0,a.jsx)("input",{name:"workDayStartHour",type:"number",min:0,max:23,value:x.workDayStartHour,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Workday end (hour)"}),(0,a.jsx)("input",{name:"workDayEndHour",type:"number",min:0,max:23,value:x.workDayEndHour,onChange:u,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,a.jsx)("input",{id:"isActive",name:"isActive",type:"checkbox",checked:x.isActive,onChange:u,className:"h-4 w-4 rounded border-slate-300 text-sky-600"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"text-xs text-slate-700",children:"Active & eligible for auto-assignment"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-slate-700",children:"Notes (internal)"}),(0,a.jsx)("textarea",{name:"notes",value:null!==(s=x.notes)&&void 0!==s?s:"",onChange:u,rows:3,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"Special instructions, skills, or limitations..."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-slate-200 pt-3",children:[(0,a.jsx)("button",{type:"button",onClick:h,className:"text-xs text-slate-600 hover:text-slate-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"inline-flex items-center rounded-lg bg-sky-600 px-4 py-2 text-xs font-medium text-white hover:bg-sky-700",children:"create"===o?"Create driver":"Save changes"})]})]})]})})]})}},381:function(e,s,t){"use strict";t.d(s,{u6:function(){return r},wQ:function(){return l},xw:function(){return a}});let a={central:"Central",east:"East",west:"West",north:"North","north-east":"North-East","island-wide":"Island-wide"},l={bike:"Bike",car:"Car",van:"Van",lorry:"Lorry",other:"Other"},r=[{id:"drv-1",code:"DRV-001",name:"Alex Tan",email:"alex.tan@example.com",phone:"+65 9001 0001",primaryRegion:"central",secondaryRegions:["east"],vehicleType:"van",isActive:!0,maxJobsPerDay:18,maxJobsPerSlot:6,workDayStartHour:9,workDayEndHour:18,notes:"Prefers CBD pickups, good with bulky items.",authUserId:void 0},{id:"drv-2",code:"DRV-002",name:"Siti Rahman",email:"siti.rahman@example.com",phone:"+65 9002 0002",primaryRegion:"east",secondaryRegions:["central","north-east"],vehicleType:"bike",isActive:!0,maxJobsPerDay:22,maxJobsPerSlot:7,workDayStartHour:8,workDayEndHour:17,notes:"Ideal for documents and small parcels.",authUserId:void 0},{id:"drv-3",code:"DRV-003",name:"Kumar Raj",email:"kumar.raj@example.com",phone:"+65 9003 0003",primaryRegion:"west",secondaryRegions:["central"],vehicleType:"lorry",isActive:!1,maxJobsPerDay:12,maxJobsPerSlot:4,workDayStartHour:9,workDayEndHour:18,notes:"On standby – usually assigned to oversized / palletized loads.",authUserId:void 0}]}},function(e){e.O(0,[971,23,744],function(){return e(e.s=68)}),_N_E=e.O()}]);