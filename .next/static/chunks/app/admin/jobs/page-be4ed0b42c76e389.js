(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{6826:function(e,t,s){Promise.resolve().then(s.bind(s,5301))},5301:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),l=s(2265);let i=[{id:"job-1",publicId:"STL-250323-1001",customerName:"GreenTech Pte Ltd",pickupRegion:"central",pickupDate:"2025-03-25",pickupSlot:"09:00 – 12:00",jobType:"scheduled",status:"assigned",assignmentMode:"auto",driverId:"drv-1",stopsCount:4,totalBillableWeightKg:32.5,createdAt:"2025-03-24T10:15:00Z"},{id:"job-2",publicId:"STL-250323-1002",customerName:"EduLink Solutions",pickupRegion:"east",pickupDate:"2025-03-25",pickupSlot:"12:00 – 15:00",jobType:"scheduled",status:"assigned",assignmentMode:"auto",driverId:"drv-2",stopsCount:2,totalBillableWeightKg:8.2,createdAt:"2025-03-24T11:05:00Z"},{id:"job-3",publicId:"STL-250323-1003",customerName:"Sunrise Clinic",pickupRegion:"central",pickupDate:"2025-03-25",pickupSlot:"15:00 – 18:00",jobType:"scheduled",status:"pending-assignment",assignmentMode:void 0,driverId:null,stopsCount:3,totalBillableWeightKg:5.4,createdAt:"2025-03-24T12:30:00Z"},{id:"job-4",publicId:"STL-250323-1004",customerName:"Quick Print Services",pickupRegion:"central",pickupDate:"2025-03-25",pickupSlot:"ASAP (within 3h)",jobType:"ad-hoc",status:"pending-assignment",assignmentMode:void 0,driverId:null,stopsCount:1,totalBillableWeightKg:1.2,createdAt:"2025-03-25T03:20:00Z"},{id:"job-5",publicId:"STL-240323-0999",customerName:"TechHub Co-working",pickupRegion:"west",pickupDate:"2025-03-24",pickupSlot:"09:00 – 12:00",jobType:"scheduled",status:"completed",assignmentMode:"manual",driverId:"drv-3",stopsCount:5,totalBillableWeightKg:45,createdAt:"2025-03-23T09:45:00Z"}];var n=s(381);function d(e){switch(e){case"central":return"Central";case"east":return"East";case"west":return"West";case"north":return"North";case"north-east":return"North-East";case"island-wide":return"Island-wide";default:return e}}function r(e){let t="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium";return"scheduled"===e?(0,a.jsx)("span",{className:"".concat(t," bg-sky-50 text-sky-700 ring-1 ring-sky-100"),children:"Scheduled"}):(0,a.jsx)("span",{className:"".concat(t," bg-amber-50 text-amber-700 ring-1 ring-amber-100"),children:"Ad-hoc / Urgent"})}function c(e){let t="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium";switch(e){case"booked":return(0,a.jsx)("span",{className:"".concat(t," bg-slate-50 text-slate-700 ring-1 ring-slate-200"),children:"Booked"});case"pending-assignment":return(0,a.jsx)("span",{className:"".concat(t," bg-orange-50 text-orange-700 ring-1 ring-orange-200"),children:"Pending assignment"});case"assigned":return(0,a.jsx)("span",{className:"".concat(t," bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200"),children:"Assigned"});case"out-for-pickup":return(0,a.jsx)("span",{className:"".concat(t," bg-blue-50 text-blue-700 ring-1 ring-blue-200"),children:"Out for pickup"});case"in-transit":return(0,a.jsx)("span",{className:"".concat(t," bg-cyan-50 text-cyan-700 ring-1 ring-cyan-200"),children:"In transit"});case"completed":return(0,a.jsx)("span",{className:"".concat(t," bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"),children:"Completed"});case"failed":return(0,a.jsx)("span",{className:"".concat(t," bg-red-50 text-red-700 ring-1 ring-red-200"),children:"Failed"});case"cancelled":return(0,a.jsx)("span",{className:"".concat(t," bg-slate-100 text-slate-500 ring-1 ring-slate-200"),children:"Cancelled"});case"returned":return(0,a.jsx)("span",{className:"".concat(t," bg-purple-50 text-purple-700 ring-1 ring-purple-200"),children:"Returned"});default:return(0,a.jsx)("span",{className:"".concat(t," bg-slate-50 text-slate-700 ring-1 ring-slate-200"),children:e})}}function o(e){let t="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium";return e?"auto"===e?(0,a.jsx)("span",{className:"".concat(t," bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"),children:"Auto-assigned"}):(0,a.jsx)("span",{className:"".concat(t," bg-sky-50 text-sky-700 ring-1 ring-sky-200"),children:"Manual assign"}):(0,a.jsx)("span",{className:"".concat(t," bg-slate-50 text-slate-500 ring-1 ring-slate-200"),children:"Not assigned"})}function x(){let[e,t]=(0,l.useState)(()=>i),[s,x]=(0,l.useState)({open:!1,job:null}),[m,p]=(0,l.useState)(""),u=(0,l.useMemo)(()=>new Date().toISOString().slice(0,10),[]),h=(0,l.useMemo)(()=>e.filter(e=>"pending-assignment"===e.status),[e]),g=(0,l.useMemo)(()=>e.filter(e=>"pending-assignment"!==e.status&&"completed"!==e.status&&"cancelled"!==e.status),[e]),b=(0,l.useMemo)(()=>e.filter(e=>"completed"===e.status),[e]),j=(0,l.useMemo)(()=>n.u6.filter(e=>e.isActive),[]),N=(0,l.useMemo)(()=>{let t={};for(let e of j)t[e.id]=0;for(let s of e)s.driverId&&s.pickupDate===u&&(t[s.driverId]=(t[s.driverId]||0)+1);return t},[e,j,u]),f=e=>{p(""),x({open:!0,job:e})},y=()=>{x({open:!1,job:null}),p("")};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-8",children:[(0,a.jsxs)("header",{className:"mb-6 flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Jobs Overview"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:"Monitor scheduled and ad-hoc jobs, and manually assign drivers when needed."})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end text-xs text-slate-500",children:[(0,a.jsxs)("span",{children:["Pending:"," ",(0,a.jsx)("span",{className:"font-semibold text-orange-600",children:h.length})]}),(0,a.jsxs)("span",{children:["Active:"," ",(0,a.jsx)("span",{className:"font-semibold text-sky-700",children:g.length})]}),(0,a.jsxs)("span",{children:["Completed today:"," ",(0,a.jsx)("span",{className:"font-semibold text-emerald-700",children:b.length})]})]})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Today's driver load (prototype)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.u6.map(e=>{var t;let s=null!==(t=N[e.id])&&void 0!==t?t:0,l=0===s?"bg-emerald-50 text-emerald-700 border-emerald-100":s<3?"bg-sky-50 text-sky-700 border-sky-100":"bg-amber-50 text-amber-700 border-amber-100";return(0,a.jsxs)("div",{className:"rounded-lg border px-3 py-2 text-[11px] ".concat(l),children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-[10px]",children:["Jobs today: ",(0,a.jsx)("span",{className:"font-semibold",children:s})," /"," ",e.maxJobsPerDay]})]},e.id)})})]}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-800",children:"Pending Assignment"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Jobs that need manual review or where auto-assignment failed."})]}),0===h.length?(0,a.jsx)("div",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center text-xs text-slate-500",children:"No jobs currently pending assignment. Auto-assigned jobs will appear in the active list below."}):(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Job"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Customer"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Pickup"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Type"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Stops / Weight"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:h.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"font-mono text-[11px] text-slate-800",children:e.publicId}),(0,a.jsxs)("div",{className:"mt-1",children:[c(e.status)," ",(0,a.jsx)("span",{className:"ml-1 inline-block",children:o(e.assignmentMode)})]})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-slate-900",children:e.customerName}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:["Created: ",new Date(e.createdAt).toLocaleString()]})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs text-slate-800",children:e.pickupDate}),(0,a.jsx)("div",{className:"text-[11px] text-slate-600",children:e.pickupSlot}),(0,a.jsxs)("div",{className:"mt-0.5 text-[11px] text-slate-500",children:["Region: ",d(e.pickupRegion)]})]}),(0,a.jsx)("td",{className:"px-3 py-2 align-top",children:r(e.jobType)}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsxs)("div",{className:"text-xs text-slate-800",children:[e.stopsCount," stop",e.stopsCount>1?"s":""]}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:[e.totalBillableWeightKg.toFixed(1)," kg billable"]})]}),(0,a.jsx)("td",{className:"px-3 py-2 align-top text-right",children:(0,a.jsx)("button",{type:"button",onClick:()=>f(e),className:"inline-flex items-center rounded-lg bg-sky-600 px-3 py-1.5 text-[11px] font-medium text-white hover:bg-sky-700",children:"Assign driver…"})})]},e.id))})]})})]}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-800",children:"Active Jobs"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Jobs that are assigned or in progress today."})]}),0===g.length?(0,a.jsx)("div",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center text-xs text-slate-500",children:"No active jobs at the moment."}):(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Job"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Customer"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Pickup"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Driver"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Type"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:g.map(e=>{let t=e.driverId&&n.u6.find(t=>t.id===e.driverId);return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"font-mono text-[11px] text-slate-800",children:e.publicId}),(0,a.jsxs)("div",{className:"mt-1",children:[c(e.status)," ",(0,a.jsx)("span",{className:"ml-1 inline-block",children:o(e.assignmentMode)})]})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-slate-900",children:e.customerName}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:[e.stopsCount," stop",e.stopsCount>1?"s":"",","," ",e.totalBillableWeightKg.toFixed(1)," kg"]})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs text-slate-800",children:e.pickupDate}),(0,a.jsx)("div",{className:"text-[11px] text-slate-600",children:e.pickupSlot}),(0,a.jsxs)("div",{className:"mt-0.5 text-[11px] text-slate-500",children:["Region: ",d(e.pickupRegion)]})]}),(0,a.jsx)("td",{className:"px-3 py-2 align-top",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-xs font-medium text-slate-900",children:t.name}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:[t.vehicleType.toUpperCase()," \xb7"," ",d(t.primaryRegion)]})]}):(0,a.jsx)("span",{className:"text-[11px] text-slate-400",children:"(No driver assigned)"})}),(0,a.jsx)("td",{className:"px-3 py-2 align-top",children:r(e.jobType)})]},e.id)})})]})})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-800",children:"Recently Completed"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"For prototype, this shows completed jobs from mock data."})]}),0===b.length?(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"No completed jobs in mock dataset."}):(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Job"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Customer"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Pickup"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:b.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"font-mono text-[11px] text-slate-800",children:e.publicId}),(0,a.jsx)("div",{className:"mt-1",children:c(e.status)})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-slate-900",children:e.customerName}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:[e.stopsCount," stops \xb7"," ",e.totalBillableWeightKg.toFixed(1)," kg"]})]}),(0,a.jsxs)("td",{className:"px-3 py-2 align-top",children:[(0,a.jsx)("div",{className:"text-xs text-slate-800",children:e.pickupDate}),(0,a.jsx)("div",{className:"text-[11px] text-slate-600",children:e.pickupSlot}),(0,a.jsxs)("div",{className:"mt-0.5 text-[11px] text-slate-500",children:["Region: ",d(e.pickupRegion)]})]})]},e.id))})]})})]})]}),s.open&&s.job&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:(0,a.jsxs)("div",{className:"w-full max-w-md rounded-xl bg-white p-4 shadow-xl",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:"Assign driver"}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-slate-600",children:["Job"," ",(0,a.jsx)("span",{className:"font-mono font-medium",children:s.job.publicId})," ","\xb7 ",s.job.customerName]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("label",{htmlFor:"driver-select",className:"text-xs font-medium text-slate-700",children:"Select driver"}),(0,a.jsxs)("select",{id:"driver-select",value:m,onChange:e=>p(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500",children:[(0,a.jsx)("option",{value:"",children:"-- Choose a driver --"}),j.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," \xb7 ",e.vehicleType.toUpperCase()," \xb7"," ",d(e.primaryRegion)]},e.id))]}),(0,a.jsx)("p",{className:"text-[11px] text-slate-500",children:"In the real system, this list will be filtered by eligibility (region, capacity, working hours, etc.), and an auto-assignment engine will pre-select the best candidate."})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsx)("button",{type:"button",onClick:y,className:"text-xs text-slate-600 hover:text-slate-800",children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:()=>{if(!s.job||!m){alert("Please select a driver.");return}let e=j.find(e=>e.id===m);if(!e){alert("Selected driver not found.");return}t(t=>t.map(t=>t.id===s.job.id?{...t,driverId:e.id,status:"assigned",assignmentMode:"manual"}:t)),y()},className:"inline-flex items-center rounded-lg bg-sky-600 px-4 py-2 text-xs font-medium text-white hover:bg-sky-700",children:"Confirm assign"})]})]})})]})}},381:function(e,t,s){"use strict";s.d(t,{u6:function(){return i},wQ:function(){return l},xw:function(){return a}});let a={central:"Central",east:"East",west:"West",north:"North","north-east":"North-East","island-wide":"Island-wide"},l={bike:"Bike",car:"Car",van:"Van",lorry:"Lorry",other:"Other"},i=[{id:"drv-1",code:"DRV-001",name:"Alex Tan",email:"alex.tan@example.com",phone:"+65 9001 0001",primaryRegion:"central",secondaryRegions:["east"],vehicleType:"van",isActive:!0,maxJobsPerDay:18,maxJobsPerSlot:6,workDayStartHour:9,workDayEndHour:18,notes:"Prefers CBD pickups, good with bulky items.",authUserId:void 0},{id:"drv-2",code:"DRV-002",name:"Siti Rahman",email:"siti.rahman@example.com",phone:"+65 9002 0002",primaryRegion:"east",secondaryRegions:["central","north-east"],vehicleType:"bike",isActive:!0,maxJobsPerDay:22,maxJobsPerSlot:7,workDayStartHour:8,workDayEndHour:17,notes:"Ideal for documents and small parcels.",authUserId:void 0},{id:"drv-3",code:"DRV-003",name:"Kumar Raj",email:"kumar.raj@example.com",phone:"+65 9003 0003",primaryRegion:"west",secondaryRegions:["central"],vehicleType:"lorry",isActive:!1,maxJobsPerDay:12,maxJobsPerSlot:4,workDayStartHour:9,workDayEndHour:18,notes:"On standby – usually assigned to oversized / palletized loads.",authUserId:void 0}]}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6826)}),_N_E=e.O()}]);