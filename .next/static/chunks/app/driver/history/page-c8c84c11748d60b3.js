(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{4718:function(e,t,s){Promise.resolve().then(s.bind(s,9836))},9836:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(2265),o=s(239);function i(){let{jobs:e,loaded:t}=(0,o.D)(),{completed:s,active:i}=(0,l.useMemo)(()=>({completed:e.filter(e=>"completed"===e.status),active:e.filter(e=>"completed"!==e.status)}),[e]);return t?(0,a.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-50",children:"Job History"}),(0,a.jsx)("p",{className:"text-[11px] text-slate-400",children:"Prototype view using locally cached jobs. Later this can filter by date range and query backend history."})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Active / Recent"}),0===i.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 px-3 py-2 text-[11px] text-slate-400",children:"No active jobs at the moment."}):(0,a.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/70 px-3 py-2 text-[11px]",children:[(0,a.jsx)("p",{className:"font-mono text-slate-400",children:e.displayId}),(0,a.jsx)("p",{className:"text-slate-50",children:e.originLabel}),(0,a.jsxs)("p",{className:"text-slate-400",children:[e.pickupDate," \xb7 ",e.pickupWindow]}),(0,a.jsxs)("p",{className:"text-slate-500",children:[e.totalStops," stops \xb7 ",e.totalBillableWeightKg.toFixed(1)," kg"]}),(0,a.jsxs)("p",{className:"mt-0.5 text-[10px] text-slate-500",children:["Status: ",e.status]})]},e.id))})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Completed"}),0===s.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 px-3 py-2 text-[11px] text-slate-400",children:"No completed jobs in this prototype dataset yet."}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border border-emerald-900 bg-slate-900/70 px-3 py-2 text-[11px]",children:[(0,a.jsx)("p",{className:"font-mono text-emerald-300",children:e.displayId}),(0,a.jsx)("p",{className:"text-slate-50",children:e.originLabel}),(0,a.jsxs)("p",{className:"text-slate-400",children:[e.pickupDate," \xb7 ",e.pickupWindow]}),(0,a.jsxs)("p",{className:"text-slate-500",children:[e.totalStops," stops \xb7 ",e.totalBillableWeightKg.toFixed(1)," kg"]}),(0,a.jsx)("p",{className:"mt-0.5 text-[10px] text-emerald-300",children:"Completed (offline data)"})]},e.id))})]})]}):(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center text-xs text-slate-400",children:"Loading history…"})}},239:function(e,t,s){"use strict";s.d(t,{D:function(){return c}});var a=s(2265);let l=[{id:"job-1",displayId:"STL-251123-1023",serviceType:"same-day",status:"pickup",pickupWindow:"09:00 – 12:00",pickupDate:"2025-11-25",totalStops:3,totalBillableWeightKg:18.4,originLabel:"Tech Hygiene Hub",areaLabel:"Central / CBD",stops:[{id:"s1",type:"pickup",sequence:1,label:"Pickup – Tech Hygiene Hub",addressLine1:"10 Dover Drive",postalCode:"138683",contactName:"Yong",contactPhone:"+65 9000 0001",remarks:"Laptop cleaning equipment – handle carefully."},{id:"s2",type:"delivery",sequence:2,label:"Delivery – ITE College Central",addressLine1:"2 Ang Mo Kio Drive",postalCode:"567720",contactName:"Operations Counter",contactPhone:"+65 9000 0002",remarks:"Deliver before 4pm; report to security."},{id:"s3",type:"delivery",sequence:3,label:"Delivery – Client Office",addressLine1:"1 Fusionopolis Way",postalCode:"138632",contactName:"IT Dept",contactPhone:"+65 9000 0003",remarks:"Restricted access – call on arrival."}]},{id:"job-2",displayId:"STL-261123-2045",serviceType:"express-3h",status:"allocated",pickupWindow:"14:00 – 17:00",pickupDate:"2025-11-25",totalStops:2,totalBillableWeightKg:5.2,originLabel:"Cleanroom Logistics",areaLabel:"West / Jurong",stops:[{id:"s1",type:"pickup",sequence:1,label:"Pickup – Cleanroom Logistics",addressLine1:"50 Jurong Gateway Road",postalCode:"608549",contactName:"Supervisor",contactPhone:"+65 9000 1000"},{id:"s2",type:"delivery",sequence:2,label:"Delivery – Lab Partner",addressLine1:"5 Science Park Drive",postalCode:"118260",contactName:"Lab Admin",contactPhone:"+65 9000 2000"}]}],o="driver-jobs-state-v1";function i(){return"PA-".concat(Date.now(),"-").concat(Math.floor(1e4*Math.random()))}function c(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{try{let e=window.localStorage.getItem(o);if(e){let s=JSON.parse(e);t(s.jobs||[]),c(s.pendingActions||[])}else t(l),c([])}catch(e){console.error("Failed to load driver jobs from localStorage",e),t(l),c([])}finally{n(!0)}},[]),(0,a.useEffect)(()=>{if(r)try{let t=JSON.stringify({jobs:e,pendingActions:s});window.localStorage.setItem(o,t)}catch(e){console.error("Failed to save driver jobs to localStorage",e)}},[e,s,r]),{jobs:e,pendingActions:s,loaded:r,markJobStatus:(0,a.useCallback)((e,s)=>{t(t=>t.map(t=>t.id===e?{...t,status:s}:t));let a={id:i(),type:"job-status",jobId:e,newStatus:s,createdAt:new Date().toISOString()};c(e=>[...e,a])},[]),markStopCompleted:(0,a.useCallback)((e,s)=>{t(t=>t.map(t=>t.id===e?{...t,stops:t.stops.map(e=>e.id===s?{...e,completed:!0}:e)}:t));let a={id:i(),type:"stop-completed",jobId:e,stopId:s,createdAt:new Date().toISOString()};c(e=>[...e,a])},[]),clearPendingAction:(0,a.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[])}}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4718)}),_N_E=e.O()}]);