(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{6331:function(e,t,s){Promise.resolve().then(s.bind(s,3356))},3356:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(7138),r=s(239);function i(){let{jobs:e,pendingActions:t,loaded:s}=(0,r.D)();return s?(0,a.jsxs)("div",{className:"px-4 py-4",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-slate-50",children:["My Jobs – ","Today"]}),(0,a.jsx)("p",{className:"text-[11px] text-slate-400",children:"Data cached locally \xb7 Works offline"})]}),t.length>0&&(0,a.jsxs)("div",{className:"rounded-full bg-amber-500/10 px-2 py-1 text-[10px] font-medium text-amber-300",children:[t.length," pending sync"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.map(e=>{let s=t.some(t=>t.jobId===e.id);return(0,a.jsxs)(l.default,{href:"/driver/job/".concat(e.id),className:"block rounded-xl border border-slate-800 bg-slate-900/70 p-4 shadow-sm transition hover:border-sky-500 hover:bg-slate-900",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] font-mono text-slate-400",children:e.displayId}),(0,a.jsx)("p",{className:"mt-0.5 text-sm font-semibold text-slate-50",children:e.originLabel}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-400",children:["Area: ",e.areaLabel]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:["inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-medium",function(e){switch(e){case"completed":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"pickup":case"in-progress":return"bg-sky-50 text-sky-700 border-sky-200";case"allocated":return"bg-amber-50 text-amber-700 border-amber-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}}(e.status)].join(" "),children:function(e){switch(e){case"booked":return"Booked";case"allocated":return"Allocated";case"pickup":return"Out for pickup";case"in-progress":return"In progress";case"completed":return"Completed";default:return e}}(e.status)}),s&&(0,a.jsx)("p",{className:"mt-1 text-[10px] text-amber-300",children:"Pending sync…"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Pickup"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.pickupDate," \xb7 ",e.pickupWindow]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Stops / Weight"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.totalStops," stops \xb7"," ",e.totalBillableWeightKg.toFixed(1)," kg"]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between text-[11px]",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Tap to view route & stops →"}),(0,a.jsx)("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-slate-200",children:"View job"})]})]},e.id)}),0===e.length&&(0,a.jsx)("p",{className:"text-center text-xs text-slate-500",children:"No jobs assigned for today."})]})]}):(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center text-xs text-slate-400",children:"Loading jobs…"})}},239:function(e,t,s){"use strict";s.d(t,{D:function(){return o}});var a=s(2265);let l=[{id:"job-1",displayId:"STL-251123-1023",serviceType:"same-day",status:"pickup",pickupWindow:"09:00 – 12:00",pickupDate:"2025-11-25",totalStops:3,totalBillableWeightKg:18.4,originLabel:"Tech Hygiene Hub",areaLabel:"Central / CBD",stops:[{id:"s1",type:"pickup",sequence:1,label:"Pickup – Tech Hygiene Hub",addressLine1:"10 Dover Drive",postalCode:"138683",contactName:"Yong",contactPhone:"+65 9000 0001",remarks:"Laptop cleaning equipment – handle carefully."},{id:"s2",type:"delivery",sequence:2,label:"Delivery – ITE College Central",addressLine1:"2 Ang Mo Kio Drive",postalCode:"567720",contactName:"Operations Counter",contactPhone:"+65 9000 0002",remarks:"Deliver before 4pm; report to security."},{id:"s3",type:"delivery",sequence:3,label:"Delivery – Client Office",addressLine1:"1 Fusionopolis Way",postalCode:"138632",contactName:"IT Dept",contactPhone:"+65 9000 0003",remarks:"Restricted access – call on arrival."}]},{id:"job-2",displayId:"STL-261123-2045",serviceType:"express-3h",status:"allocated",pickupWindow:"14:00 – 17:00",pickupDate:"2025-11-25",totalStops:2,totalBillableWeightKg:5.2,originLabel:"Cleanroom Logistics",areaLabel:"West / Jurong",stops:[{id:"s1",type:"pickup",sequence:1,label:"Pickup – Cleanroom Logistics",addressLine1:"50 Jurong Gateway Road",postalCode:"608549",contactName:"Supervisor",contactPhone:"+65 9000 1000"},{id:"s2",type:"delivery",sequence:2,label:"Delivery – Lab Partner",addressLine1:"5 Science Park Drive",postalCode:"118260",contactName:"Lab Admin",contactPhone:"+65 9000 2000"}]}],r="driver-jobs-state-v1";function i(){return"PA-".concat(Date.now(),"-").concat(Math.floor(1e4*Math.random()))}function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[n,c]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{try{let e=window.localStorage.getItem(r);if(e){let s=JSON.parse(e);t(s.jobs||[]),o(s.pendingActions||[])}else t(l),o([])}catch(e){console.error("Failed to load driver jobs from localStorage",e),t(l),o([])}finally{c(!0)}},[]),(0,a.useEffect)(()=>{if(n)try{let t=JSON.stringify({jobs:e,pendingActions:s});window.localStorage.setItem(r,t)}catch(e){console.error("Failed to save driver jobs to localStorage",e)}},[e,s,n]),{jobs:e,pendingActions:s,loaded:n,markJobStatus:(0,a.useCallback)((e,s)=>{t(t=>t.map(t=>t.id===e?{...t,status:s}:t));let a={id:i(),type:"job-status",jobId:e,newStatus:s,createdAt:new Date().toISOString()};o(e=>[...e,a])},[]),markStopCompleted:(0,a.useCallback)((e,s)=>{t(t=>t.map(t=>t.id===e?{...t,stops:t.stops.map(e=>e.id===s?{...e,completed:!0}:e)}:t));let a={id:i(),type:"stop-completed",jobId:e,stopId:s,createdAt:new Date().toISOString()};o(e=>[...e,a])},[]),clearPendingAction:(0,a.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[])}}}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=6331)}),_N_E=e.O()}]);